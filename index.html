<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Project website for Towards Stable and Consistent Long Interactive Video Generation" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stable World</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap"
    rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root{
      --primary:#8b5cf6;
      --accent:#06b6d4;
      --dark:#030014;
      --text:#f8fafc;
      --text-muted:#9da8b8;

      --light-bg:#ffffff;
      --light-bg-alt:#f7f9fc;
      --light-text:#1e293b;
      --light-text-muted:#64748b;

      --divider:#f2c4c4; /* Ê†áÈ¢ò‰∏ãÁü≠Á∫¢Á∫øÔºàDiverseARÈ£éÊ†ºÔºâ */
      --dashline: rgba(160,185,220,0.35); /* ÂàÜÈöîËôöÁ∫øÈ¢úËâ≤ÔºàDiverseARÈ£éÊ†ºÔºâ */
    }

    *{ margin:0; padding:0; box-sizing:border-box; }
    html{ scroll-behavior:smooth; }
    body{
      font-family:"Outfit", sans-serif;
      background:var(--dark);
      color:var(--text);
      overflow-x:hidden;
    }

    /* ===================== HERO ===================== */
    .hero{
      position:relative;
      width:100vw;
      height:100vh;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .video-wall{
      position:absolute;
      inset:0;
      display:flex;
      flex-direction:column;
      gap:8px;
      opacity:0.55;
      z-index:1;
    }

    .video-row{
      display:flex;
      gap:8px;
      flex:1;
      width:max-content;
      will-change:transform;
    }

    .video-row:nth-child(1){ animation: scrollLeft 62s linear infinite; }
    .video-row:nth-child(2){ animation: scrollRight 58s linear infinite; }
    .video-row:nth-child(3){ animation: scrollLeft 68s linear infinite; }
    .video-row:nth-child(4){ animation: scrollRight 65s linear infinite; }

    @keyframes scrollLeft{ from{ transform:translateX(0);} to{ transform:translateX(-50%);} }
    @keyframes scrollRight{ from{ transform:translateX(-50%);} to{ transform:translateX(0);} }

    .video-cell{
      position:relative;
      flex-shrink:0;
      width: calc(130vw / 5 - 8px);
      height:100%;
      overflow:hidden;
      border-radius:10px;
      background:#0b0b18;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    }

    .video-cell video{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      transform:scale(1.02);
      filter:saturate(1.05);
    }

    /* Èò≤ÈªëÂ±èÔºöÂú®ËßÜÈ¢ë ready ÂâçÁõñ‰∏Ä‰∏™Ê∏êÂèò */
    .video-thumb{
      position:absolute;
      inset:0;
      background: radial-gradient(1200px 600px at 30% 30%, rgba(139,92,246,.35), transparent 60%),
                  radial-gradient(1200px 600px at 70% 70%, rgba(6,182,212,.30), transparent 60%),
                  rgba(0,0,0,0.55);
      opacity:1;
      transition:opacity 250ms ease;
      z-index:2;
    }
    .video-cell.ready .video-thumb{ opacity:0; pointer-events:none; }

    .hero-overlay{
      position:absolute;
      inset:0;
      background:rgba(0,0,0,0.45);
      z-index:2;
    }

    .hero-content{
      position:relative;
      z-index:10;
      text-align:center;
      padding: 0 18px;
      max-width: 1050px;
    }

    .hero-title{
      font-size: clamp(3rem, 8vw, 6.5rem);
      font-weight: 800;
      line-height:1;
      margin-bottom: 14px;
    }
    .hero-title .highlight{
      background: linear-gradient(135deg, #a78bfa 0%, #06b6d4 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    .hero-subtitle{
      font-size: clamp(1.1rem, 2.6vw, 1.7rem);
      font-weight: 300;
      color: var(--text-muted);
      margin-bottom: 26px;
    }

    .authors{
      margin-top: 6px;
      margin-bottom: 8px;
      color: rgba(248,250,252,0.9);
      font-size: 1.02rem;
      line-height: 1.8;
    }
    .affiliations{
      color: var(--text-muted);
      font-size: 0.98rem;
      line-height: 1.8;
      margin-bottom: 24px;
    }

    .hero-actions{
      display:flex;
      gap: 10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 8px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: 500;
      text-decoration:none;
      border: 1px solid rgba(255,255,255,0.18);
      color: var(--text);
      background: rgba(255,255,255,0.04);
      backdrop-filter: blur(10px);
      transition: transform .2s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{
      transform: translateY(-2px);
      background: rgba(255,255,255,0.08);
      border-color: rgba(167,139,250,0.6);
    }
    .btn-primary{
      border:none;
      background: linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%);
      box-shadow: 0 10px 25px rgba(139,92,246,0.30);
    }
    .btn-primary:hover{ box-shadow: 0 14px 35px rgba(139,92,246,0.38); }

    /* ===================== MAIN (DiverseAR È£éÊ†º) ===================== */
    .main-content{
      background: var(--light-bg);
      color: var(--light-text);
    }

    /* ÂÖ≥ÈîÆÔºösection Èó¥Ë∑ùÈááÁî® DiverseAR Á¥ßÂáëÈ£éÊ†º */
    .section{
      padding: 16px 10px;
      margin: 0 auto;
      text-align:center;
      max-width: 1200px;
    }

    .section-title{
      font-size: 32px;
      font-weight: 700;
      margin-top: 20px;
      margin-bottom: 5px;
      color: var(--light-text);
    }

    .section-divider{
      width: 80px;
      height: 4px;
      background: var(--divider);
      margin: 10px auto 20px;
    }

    .section-divider-line{
      width: 100%;
      height: 1px;
      background: var(--dashline);
      margin: 0;
    }

    /* Abstract */
    .abstract-text{
      font-size: 16px;
      line-height: 24px;
      width: 62%;
      max-width: 900px;
      margin: 20px auto 25px;
      text-align: left;
      color: var(--light-text-muted);
    }

    /* Video Presentation (YouTube) */
    .video-container{
      width: 73%;
      aspect-ratio: 16 / 9;
      max-width: 1020px;
      margin: 0 auto 10px;
      border-radius: 14px;
      overflow:hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.10);
      background: var(--light-bg-alt);
    }
    .video-container iframe{
      width:100%;
      height:100%;
      border:0;
    }

    /* Figure card (shadow like your screenshot) */
    .framework-container{
      width: 85%;
      max-width: 1050px;
      margin: 0 auto 20px auto;
    }
    .framework-image{
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.10);
      background: #fff;
      display:block;
    }
    .framework-text{
      width: 85%;
      max-width: 1050px;
      margin: 14px auto 6px;
      font-size: 16px;
      line-height: 24px;
      color: var(--light-text-muted);
      text-align: center;
    }

/* =========================
   Titles
   ========================= */

/* Â§ßÊ†áÈ¢òÔºöMatrix-Game vs StableWorld */
.block-title{
  font-size: 28px;
  font-weight: 800;
  margin: 32px auto 10px;
  width: 90%;
  max-width: 1200px;
  text-align: left;
  color: var(--light-text);
}

/* Â∞èÊ†áÈ¢òÔºöVideo 1 / Video 2 ... */
.video-row-title{
  font-size: 18px;
  font-weight: 800;
  margin: 14px auto 10px;
  width: 90%;
  max-width: 1200px;
  text-align: left;
  color: var(--light-text);
}

/* =========================
   Layouts
   ========================= */

/* 2ÂàóÂØπÊØîÔºàVanilla vs StableWorldÔºâ */
.compare-grid{
  width: 90%;
  max-width: 1200px;
  margin: 0 auto 16px auto;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 18px;
}

/* 3ÂàóÂ±ïÁ§∫ÔºàÂ¶ÇÊûú‰Ω†ËøòÈúÄË¶Å‰∏âÂç°‰∏ÄË°åÈÇ£Áßç gallery ÊâçÁî®Ôºâ */
.video-grid{
  width: 90%;
  max-width: 1200px;
  margin: 0 auto 22px auto;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 18px;
}

/* =========================
   Cards
   ========================= */

.video-card{
  position: relative;
  border-radius: 14px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 10px 30px rgba(0,0,0,0.10);
}

/* ÂèØÈÄâÔºöÂä†ËΩΩÊó∂ÁöÑÂç†‰ΩçÂ±ÇÔºà‰Ω†ÊÉ≥Ë¶ÅÂ∞±‰øùÁïôÔºâ */
.video-card .card-thumb{
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(139,92,246,.10), rgba(6,182,212,.10)), #eef2ff;
  opacity: 1;
  transition: opacity 200ms ease;
  z-index: 2;
}
.video-card.ready .card-thumb{ opacity: 0; pointer-events: none; }

.video-card video{
  width: 100%;
  height: auto;
  display: block;
}

/* Âç°ÁâáÂ∫ï‰∏ãÁöÑÂ∞èÂ≠óÔºàVanilla / StableWorldÔºâ */
.video-caption{
  padding: 10px 12px;
  font-size: 14px;
  color: var(--light-text-muted);
  background: #ffffff;
  border-top: 1px solid rgba(0,0,0,0.06);
  text-align: center;
}

/* ÊèêÁ§∫ÊñáÂ≠ó */
.hint-text{
  width: 90%;
  max-width: 1200px;
  margin: 6px auto 0;
  color: var(--light-text-muted);
  font-size: 14px;
  text-align: center;
}

/* =========================
   Responsive
   ========================= */

@media (max-width: 900px){
  .compare-grid{ grid-template-columns: 1fr; }
  .video-grid{ grid-template-columns: 1fr; } /* ÂèØÈÄâÔºö‰∏âÂàóÂèò‰∏ÄÂàó */
}


    /* BibTeX */
    .bibtex-card{
      width: 97%;
      max-width: 1160px;
      margin: 28px auto 50px;
      background:#ffffff;
      border-radius: 14px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.08);
      padding: 18px 22px 24px;
      text-align:left;
    }
    .bibtex-header{
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      color: var(--light-text);
    }
    .copy-btn{
      padding: 8px 14px;
      background: #4a6cff;
      color: #fff;
      border:none;
      border-radius: 8px;
      cursor:pointer;
      font-size: 15px;
    }
    .copy-btn:hover{ background:#6f82ff; }
    .bibtex-box{
      background: var(--light-bg-alt);
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 14px 16px;
      overflow-x:auto;
      font-family: "Space Mono", monospace;
      font-size: 14px;
      line-height: 1.55;
      white-space: pre;
      color: #0f172a;
    }

    /* Responsive */
    @media (max-width: 1024px){
      .video-cell{ width: calc(120vw / 4 - 8px); }
      .video-grid{ grid-template-columns: repeat(2, 1fr); }
      .abstract-text{ width: 86%; }
      .video-container{ width: 92%; }
    }
    @media (max-width: 640px){
      .video-cell{ width: calc(120vw / 3 - 8px); }
      .video-grid{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>

  <!-- ===================== HERO ===================== -->
  <section class="hero" id="hero">
    <div class="video-wall" id="videoWall">
      <div class="video-row" data-count="10"></div>
      <div class="video-row" data-count="10"></div>
      <div class="video-row" data-count="10"></div>
      <div class="video-row" data-count="10"></div>
    </div>

    <div class="hero-overlay"></div>

    <div class="hero-content">
      <h1 class="hero-title"><span class="highlight">Stable World</span></h1>
      <p class="hero-subtitle">Towards Stable and Consistent Long Interactive Video Generation</p>

      <!-- ‰Ω†ÂêçÂ≠ó‰∏çË¶ÅÊîπÔºöËøôÈáå‰øùÊåÅ‰Ω†ÂéüÂÜôÊ≥ïÔºàÂè™ÊòØÊéíÁâàÊõ¥Âπ≤ÂáÄÔºâ -->
      <div class="authors">
        <sup>1</sup>Ying Yang &nbsp;&nbsp;
        <sup>2</sup>Zhengyao Lv &nbsp;&nbsp;
        <sup>3</sup>Tianlin Pan &nbsp;&nbsp;
        <sup>4</sup>Haofan Wang &nbsp;&nbsp;
        <sup>5</sup>Binxin Yang &nbsp;&nbsp;
        <sup>6</sup>Hubery Yin &nbsp;&nbsp;
        <sup>6</sup>HChen Li &nbsp;&nbsp;
        <sup>6</sup>Ziwei Liu &nbsp;&nbsp;
        <sup>6</sup>Chenyang Si
      </div>

      <div class="affiliations">
        <sup>1</sup>PRLab, Nanjing University &nbsp;&nbsp;
        <sup>2</sup>The University of Hong Kong &nbsp;&nbsp;
        <sup>3</sup>University of Chinese Academy of Sciences &nbsp;&nbsp;
        <sup>4</sup>Lovart AI &nbsp;&nbsp;
        <sup>5</sup>WeChat, Tencent Inc. &nbsp;&nbsp;
        <sup>6</sup>Nanyang Technological University
      </div>

      <div class="hero-actions">
        <a href="https://arxiv.org/abs/2512.13604" target="_blank" class="btn btn-primary">
          <i class="bi bi-file-earmark-text"></i> Arxiv
        </a>
        <a href="https://github.com/Sd-World" target="_blank" class="btn">
          <i class="bi bi-github"></i> Code
        </a>
        <a href="#video-presentation" class="btn">
          <i class="bi bi-play-circle"></i> Video
        </a>
      </div>
    </div>
  </section>

  <!-- ===================== MAIN ===================== -->
  <main class="main-content">

    <!-- Video Presentation -->
    <section class="section" id="video-presentation">
      <h2 class="section-title">Video Presentation</h2>
      <div class="section-divider"></div>

      <div class="video-container">
        <iframe
          src="https://www.youtube.com/embed/M9JIGIk9hEM"
          title="StableWorld Video Presentation"
          allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>
    </section>

    <div class="section-divider-line"></div>

    <!-- Abstract -->
    <section class="section" id="abstract">
      <h2 class="section-title">Abstract</h2>
      <div class="section-divider"></div>

      <p class="abstract-text">
        In this paper, we explore the overlooked challenge of stability and temporal consistency in interactive video generation,
        which synthesizes dynamic and controllable video worlds through interactive behaviors such as camera movements and text prompts.
        Despite remarkable progress in world modeling, current methods still suffer from severe instability and temporal degradation,
        often leading to spatial drift and scene collapse during long-horizon interactions. To better understand this issue, we initially
        investigate the underlying causes of instability and identify that the major source of error accumulation originates from the same scene,
        where generated frames gradually deviate from the initial clean state and propagate errors to subsequent frames. Building upon this observation,
        we propose a simple yet effective method, <strong>StableWorld</strong>, a Dynamic Frame Eviction Mechanism. By continuously filtering out degraded frames
        while retaining geometrically consistent ones, StableWorld effectively prevents cumulative drift at its source, leading to more stable and temporal
        consistency of interactive generation. Promising results on multiple interactive video models, e.g., Matrix-Game, Open-Oasis, and Hunyuan-GameCraft,
        demonstrate that StableWorld is model-agnostic and can be applied to different interactive video generation frameworks to substantially improve stability,
        temporal consistency, and generalization across diverse interactive scenarios.
      </p>
    </section>

    <div class="section-divider-line"></div>

    <!-- Framework -->
    <section class="section" id="framework">
      <h2 class="section-title">Overall Framework of StableWorld</h2>
      <div class="section-divider"></div>

      <div class="framework-container">
        <img
          src="https://raw.githubusercontent.com/Sd-World/Sd-World.github.io/main/overnew_01.png"
          alt="Overall Framework of StableWorld"
          class="framework-image"
        />
      </div>

      <p class="framework-text">
        StableWorld dynamically evicts degraded frames while retaining geometrically consistent frames to prevent cumulative drift and improve temporal stability
        in interactive video generation.
      </p>
    </section>

    <div class="section-divider-line"></div>

    <!-- Results (HF videos) -->
    <section class="section" id="results">
      <h2 class="section-title">Visual Results</h2>
      <div class="section-divider"></div>

      <div id="resultsRoot"></div>

      <p class="abstract-text" style="margin-top: 10px;">
        Tip: All demo videos below are configured to loop only the first <strong>30 seconds</strong>.
      </p>
    </section>

    <div class="section-divider-line"></div>

    <!-- BibTeX -->
    <div class="bibtex-card" id="bibtex">
      <div class="bibtex-header">
        üìö BibTeX
        <button class="copy-btn" onclick="copyBibtex()">üìÑ Copy</button>
      </div>

      <pre class="bibtex-box" id="bibtexText">@misc{stableworld2025,
  title={StableWorld: Towards Stable and Consistent Long Interactive Video Generation},
  author={Ying Yang and Zhengyao Lv and Tianlin Pan and Haofan Wang and Binxin Yang and Hubery Yin and Chen Li and Ziwei Liu and Chenyang Si},
  year={2025},
  eprint={2512.13604},
  archivePrefix={arXiv},
  primaryClass={cs.CV}
}</pre>
    </div>

  </main>

<script>
  /* ============ HF ËßÜÈ¢ëÊ±†Ôºàhero ËÉåÊôØÁî®Ôºâ ============ */
  const HF_DEMO_BASE = "https://huggingface.co/datasets/yycfq/stableworld/resolve/main/demo/";

  const VIDEO_POOL = [
    "motion_imgae1.mp4","motion_imgae1_icon.mp4",
    "motion_imgae2.mp4","motion_imgae2_icon.mp4",
    "motion_imgae3.mp4","motion_imgae3_icon.mp4",
    "motion_imgae4.mp4","motion_imgae4_icon.mp4",
    "motion_imgae5.mp4","motion_imgae5_icon.mp4",
    "motion_imgae6.mp4","motion_imgae6_icon.mp4",
    "motion_imgae7.mp4","motion_imgae7_icon.mp4",
    "motion_imgae8.mp4","motion_imgae8_icon.mp4",
    "motion_imgae9.mp4","motion_imgae9_icon.mp4",
    "motion_imgae10.mp4","motion_imgae10_icon.mp4",
    "motion_imgae11.mp4","motion_imgae11_icon.mp4",
    "motion_imgae12.mp4","motion_imgae12_icon.mp4",
    "motion_imgae13.mp4","motion_imgae13_icon.mp4",
    "motion_imgae14.mp4",
    "motion_imgae15.mp4","motion_imgae15_icon.mp4",
    "motion_imgae16.mp4",
    "motion_imgae17.mp4",
    "motion_imgae21_icon.mp4",
    "motion_imgae22.mp4",
    "motion_imgae23.mp4",
    "motion_imgae24_icon.mp4",
    "motion_imgae25.mp4","motion_imgae25_icon.mp4",
    "motion_imgae26.mp4",
    "motion_imgae29_icon.mp4"
  ];

  const HERO_VIDEOS = VIDEO_POOL.filter(v => v.includes("_icon"));
  const HERO_FALLBACK = VIDEO_POOL.slice();

  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]]=[a[j],a[i]];
    }
    return a;
  }

  function buildHeroCell(src){
    const cell = document.createElement("div");
    cell.className = "video-cell";

    const thumb = document.createElement("div");
    thumb.className = "video-thumb";
    cell.appendChild(thumb);

    const v = document.createElement("video");
    v.muted = true;
    v.autoplay = true;
    v.loop = true;
    v.playsInline = true;
    v.preload = "metadata";
    v.src = src;

    const markReady = () => setTimeout(() => cell.classList.add("ready"), 120);
    v.addEventListener("loadeddata", markReady);
    v.addEventListener("canplay", markReady);

    cell.appendChild(v);
    return cell;
  }

  function initHeroWall(){
    const rows = document.querySelectorAll("#videoWall .video-row");
    rows.forEach(row => {
      const count = parseInt(row.dataset.count || "10", 10);

      let bag = shuffle(HERO_VIDEOS.length ? HERO_VIDEOS : HERO_FALLBACK);
      const firstBatch = [];

      for(let i=0;i<count;i++){
        if(bag.length === 0) bag = shuffle(HERO_FALLBACK);
        const name = bag.pop();
        row.appendChild(buildHeroCell(HF_DEMO_BASE + name));
        firstBatch.push(name);
      }

      // duplicate for seamless scroll
      firstBatch.forEach(name => {
        row.appendChild(buildHeroCell(HF_DEMO_BASE + name));
      });
    });
  }

/* ============ Compare Sections Config ============ */
const HF_ROOT_BASE = "https://huggingface.co/datasets/yycfq/stableworld/resolve/main/";

/**
 * ÊØè‰∏™ section:
 * - title: Â§ßÊ†áÈ¢ò
 * - leftLabel/rightLabel: ‰∏§Âàócaption
 * - leftBase/rightBase: HFË∑ØÂæÑ
 * - files: Ëøô‰∏™sectionË¶ÅÂ±ïÁ§∫ÁöÑÊñá‰ª∂ÂàóË°®ÔºàÈ°∫Â∫èÂÜ≥ÂÆö Video1/2/3Ôºâ
 */
const COMPARE_SECTIONS = [
  {
    key: "matrix",
    title: "Matrix-Game 2.0: Vanilla vs StableWorld",
    leftLabel: "Vanilla",
    rightLabel: "StableWorld",
    leftBase: HF_ROOT_BASE + "matrix/bad/",
    rightBase: HF_ROOT_BASE + "matrix/good1/",
    files: [
      "motion_3_icon.mp4",
      "motion_image_icon.mp4",
      "tmp_51s_59s.mp4",
      "tmp_motion14_51s_59s.mp4",
      "tmp_motion21_51s_59s.mp4",
    ],
  },

  // ‚úÖ È¢ÑÁïôÔºö‰Ω†ÂêéÁª≠Âè™Ë¶ÅÊää base Âíå files Â°´‰∏äÂ∞±‰ºöËá™Âä®Âá∫Êù•
  {
    key: "hunyuan",
    title: "Hunyuan-GameCraft: Vanilla vs StableWorld",
    leftLabel: "Vanilla",
    rightLabel: "StableWorld",
    leftBase: HF_ROOT_BASE + "hunyuan/bad/",     // TODO: ÊîπÊàê‰Ω†ÁöÑÁúüÂÆûË∑ØÂæÑ
    rightBase: HF_ROOT_BASE + "hunyuan/good/",   // TODO
    files: [
      // TODO: ‰Ω†ÁöÑÊñá‰ª∂Âêç
      // "video1.mp4",
      // "video2.mp4",
    ],
  },

  {
    key: "oasis",
    title: "Open-Oasis: Vanilla vs StableWorld",
    leftLabel: "Vanilla",
    rightLabel: "StableWorld",
    leftBase: HF_ROOT_BASE + "oasis/bad/",       // TODO
    rightBase: HF_ROOT_BASE + "oasis/good/",     // TODO
    files: [],
  },

  {
    key: "long",
    title: "Ultra-long Video Generation (thousands of frames)",
    leftLabel: "Vanilla",
    rightLabel: "StableWorld",
    leftBase: HF_ROOT_BASE + "long/bad/",        // TODO
    rightBase: HF_ROOT_BASE + "long/good/",      // TODO
    files: [],
  },

  {
    key: "selfforcing",
    title: "Self-Forcing (Autoregressive Video): Vanilla vs StableWorld",
    leftLabel: "Vanilla (Self-Forcing)",
    rightLabel: "StableWorld",
    leftBase: HF_ROOT_BASE + "selfforcing/bad/", // TODO
    rightBase: HF_ROOT_BASE + "selfforcing/good/",// TODO
    files: [],
  },
];

function buildVideoCard(url, label, maxSeconds=30) {
  const card = document.createElement("div");
  card.className = "video-card";

  const v = document.createElement("video");
  v.src = url;
  v.controls = true;
  v.muted = true;
  v.playsInline = true;
  v.preload = "metadata";
  v.dataset.max = String(maxSeconds);  // ‚úÖ Áªü‰∏ÄÂè™Âæ™ÁéØÂâç30ÁßíÔºà‰Ω†Ë¶ÅÊîπ60Â∞±ÊîπËøôÈáåÔºâ
  card.appendChild(v);

  const cap = document.createElement("div");
  cap.className = "video-caption";
  cap.textContent = label;
  card.appendChild(cap);

  return card;
}

function renderCompareSections() {
  const root = document.getElementById("resultsRoot");
  if (!root) return;
  root.innerHTML = "";

  COMPARE_SECTIONS.forEach((sec) => {
    // Â¶ÇÊûú files ‰∏∫Á©∫ÔºåÂ∞±ÂÖà‰∏çÊ∏≤ÊüìÔºà‰πüÂèØ‰ª•Ê∏≤Êüì‚ÄúComing soon‚ÄùÔºå‰Ω†ËØ¥ÊàëÂ∞±Âä†Ôºâ
    if (!sec.files || sec.files.length === 0) return;

    const blockTitle = document.createElement("div");
    blockTitle.className = "block-title";
    blockTitle.textContent = sec.title;
    root.appendChild(blockTitle);

    sec.files.forEach((fname, idx) => {
      const rowTitle = document.createElement("div");
      rowTitle.className = "video-row-title";
      rowTitle.textContent = `Video ${idx + 1}`;
      root.appendChild(rowTitle);

      const grid = document.createElement("div");
      grid.className = "compare-grid";

      grid.appendChild(buildVideoCard(sec.leftBase + fname,  sec.leftLabel));
      grid.appendChild(buildVideoCard(sec.rightBase + fname, sec.rightLabel));

      root.appendChild(grid);
    });
  });
}

/* ‰Ω†ÂéüÊù•ÁöÑ enforceMaxSeconds ‰øùÁïôÂç≥ÂèØ */
function enforceMaxSeconds(){
  document.querySelectorAll("video[data-max]").forEach(v => {
    const max = parseFloat(v.dataset.max || "0");
    if(!max || isNaN(max)) return;

    v.addEventListener("timeupdate", () => {
      if(v.currentTime >= max - 0.05){
        v.currentTime = 0;
        if(!v.paused) v.play().catch(()=>{});
      }
    });
  });
}

document.addEventListener("DOMContentLoaded", () => {
  renderCompareSections();
  enforceMaxSeconds();
});
</script>

</body>
</html>
